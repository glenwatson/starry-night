<html>
	<head>
		<style>
			body {
				margin: 0;
				width: 100%;
				height: 100%;
			}
		</style>
	</head>
	<body>
		<canvas id="space">No canvas support</canvas>
		<script>
			var SPEED = 10;
			var NUM_STARS = 1000;
			var FORCE_DIST = 200;
			var FORCE_SCALE = 100
			var canvas = document.getElementById('space');
			canvas.width = document.body.clientWidth;
			canvas.height = document.body.clientHeight;
			var ctx = canvas.getContext('2d');
			
			var stars = [];
			var forces = [];
			//populate
			for(var i=0; i<NUM_STARS; i++) {
				stars.push({
					pos: {
						x: Math.random() * canvas.width,
						y: Math.random() * canvas.height,
					},
					color: randomColor()
				});
			}
			forces.push({pos: {x: 300, y: 300}, dir: {x: 0, y: 10}});
			forces.push({pos: {x: 300, y: 300}, dir: {x: 10, y: 0}});
			forces.push({pos: {x: 300, y: 300}, dir: {x: 0, y: -10}});
			forces.push({pos: {x: 300, y: 300}, dir: {x: -10, y: 0}});
			forces.push({pos: {x: 700, y: 700}, dir: {x: 0, y: 5}});
			forces.push({pos: {x: 1200, y: 300}, dir: {x: 5, y: 5}});
			forces.push({pos: {x: 1200, y: 300}, dir: {x: 5, y: 5}});
			forces.push({pos: {x: 1300, y: 700}, dir: {x: 0, y: 10}});
			forces.push({pos: {x: 1200, y: 800}, dir: {x: 10, y: 0}});
			forces.push({pos: {x: 1300, y: 900}, dir: {x: 0, y: -10}});
			forces.push({pos: {x: 1400, y: 800}, dir: {x: -10, y: 0}});
			function tick() {
				console.log('tick');
				//move
				for(var i in stars) {
					var star = stars[i];
						for (var f in forces) {
						var force = forces[f];
						var d = dist(star.pos, force.pos);
						if (d < FORCE_DIST) {
							star.pos.x += force.dir.x * (FORCE_DIST - d) / FORCE_SCALE;
							star.pos.y += force.dir.y * (FORCE_DIST - d) / FORCE_SCALE;
						}
					}
				}
				drawBG();
				drawStars(stars);
			}
			function dist(pos1, pos2) {
				return Math.sqrt(Math.pow(pos1.x - pos2.x, 2) + Math.pow(pos1.y - pos2.y, 2));
			}
			function drawStars(stars) {
				for(var i in stars) {
					ctx.fillStyle = stars[i].color;
					drawStar(stars[i].pos.x, stars[i].pos.y, ctx);
				}
			}
			function drawStar(x, y, ctx) {
				ctx.beginPath();
				ctx.arc(x, y, 2, 0, Math.PI*2, true);
				ctx.fill();
				ctx.closePath();
			}
			function drawBG () {
				ctx.fillStyle = "rgb(0, 0, 0)";
				ctx.fillRect(0, 0, canvas.width, canvas.height);
			}
			function randomColor() {
				return "#"+randomHex()+randomHex()+randomHex()+randomHex()+randomHex()+randomHex();
			}
			function randomHex() {
				return Math.round(Math.random() * 16).toString(16);
			}
			setInterval(tick, SPEED);
		</script>
	</body>
</html>
